---
title: Понимание ошибок
description: Умение читать и понимать сообщения об ошибках — это важное требование для разработчика. На первый взгляд, многие новички испытывают страх перед сообщениями об ошибках, потому что они кажутся «страшными» и сложными для понимания, так как содержат незнакомые термины.
---

# {{ $frontmatter.title}}

## Введение

Умение читать и понимать сообщения об ошибках — это важное требование для разработчика. На первый взгляд, многие новички испытывают страх перед сообщениями об ошибках, потому что они кажутся «страшными» и сложными для понимания, так как содержат незнакомые термины.

Однако сообщения об ошибках предоставляют разработчикам настоящий кладезь знаний и рассказывают всё, что нужно знать, чтобы их устранить! Умение без страха анализировать такие сообщения позволит вам эффективно отлаживать приложения, получать осмысленную помощь от других и самостоятельно справляться с возникающими проблемами.

## Обзор урока

Темы, которые вы изучите в данном уроке:

- Назовёте как минимум три типа ошибок JavaScript.
- Определите две части сообщения об ошибке, которые помогают найти место её возникновения.
- Научитесь исследовать и решать возникающие ошибки.

## Анатомия ошибки

Ошибка — это специальный тип объекта, встроенный в язык JS, который состоит из имени/типа и сообщения. Ошибки содержат важную информацию, которая поможет вам найти код, вызвавший проблему, понять причину ошибки и устранить её.

> Для всех примеров этого урока рекомендуется запускать код в консоли браузера.

Предположим, мы написали следующий код:

```javascript
const a = "Hello";
const b = "World";

console.log(c);
```

Этот код выполнится, но он вызовет ошибку. С технической точки зрения, это называется «выбрасывание (throwing) ошибки». Первая часть сообщения указывает тип ошибки. Это даёт первое представление о том, с чем вы имеете дело. Более подробно о различных типах ошибок поговорим чуть позже. В данном случае у нас `ReferenceError`.

::: danger Ошибка

```
Uncaught ReferenceError: c is not defined at script.js:4:13
```

:::

`ReferenceError` выбрасывается, когда вы обращаетесь к переменной, которая не объявлена и/или не инициализирована в текущей области видимости. В нашем случае сообщение объясняет, что ошибка произошла из-за того, что переменная `c` не определена.

Разные ошибки этого типа имеют разные тексты сообщений в зависимости от причины возникновения `ReferenceError`. Например, вы можете столкнуться с таким сообщением: `ReferenceError: can't access lexical declaration 'X' before initialization`.

Как мы видим, это указывает на совершенно другую причину, чем наш предыдущий `ReferenceError`. Поэтому важно понимать не только тип ошибки, но и само сообщение, чтобы разобраться, почему она возникла.

Следующая часть ошибки сообщает нам имя файла, в котором находится ошибка (в данном случае `script.js`), а также номер строки.

Это позволяет легко перейти к проблемной строке в вашем коде. Здесь ошибка возникла в четвёртой строке `script.js`, что отображается как ссылка под сообщением об ошибке в виде `at script.js:4`. Если щёлкнуть эту ссылку, большинство браузеров перейдут к точной строке кода и покажут остальную часть вашего скрипта во вкладке Sources (Источники) инструментов разработчика.

Иногда в консоли браузера также отображается номер колонки (или символа) в строке, где произошла ошибка. В нашем примере это будет указано как `at script.js:4:13`.

Ещё одной важной частью ошибки является **трассировка стека (stack trace)**. Она помогает понять, когда ошибка была выброшена в вашем приложении, и какие функции были вызваны до появления этой ошибки.

Например, если у нас есть следующий код:

```javascript
const a = 5;
const b = 10;

function add() {
  return c;
}

function print() {
  add();
}

print();
```

Функция `print()` должна вызвать `add()`, которая возвращает переменную `c`, которая пока не объявлена. В результате получаем следующую ошибку:

::: danger Ошибка

```
Uncaught ReferenceError: c is not defined
    at add (script.js:5:3)
    at print (script.js:9:3)
    at script.js:12:1
```

:::

1. Переменная `c` не определена в области видимости функции `add()`, которая объявлена на строке 5.
2. Функция `add()` была вызвана функцией `print()`, объявленной на строке 9.
3. Функция `print()` сама была вызвана на строке 12.

Таким образом, трассировка стека позволяет проследить развитие ошибки до самого начала — в данном случае до объявления функции `add()`.

## Распространённые типы ошибок

Ниже приведены одни из самых распространённых ошибок, с которыми вы можете столкнуться. Поэтому важно понимать их и уметь распознавать.

**Синтаксическая ошибка (Syntax error)**

Синтаксическая ошибка возникает, когда код, который вы пытаетесь запустить, написан неправильно — то есть нарушены правила грамматики JavaScript. Например:

```javascript
function helloWorld() {
  console.log "Hello World!"
}
```

Этот код вызовет следующую ошибку, потому что мы забыли круглые скобки после `console.log()`!

::: danger Ошибка

```
Uncaught SyntaxError: Unexpected string
```

:::

**Ошибка ссылки (Reference error)**

Мы уже рассматривали ReferenceError в первом примере этого урока. Важно помнить, что такие ошибки возникают, когда вы пытаетесь обратиться к переменной, которая не существует (в текущей области видимости) или была написана с ошибкой.

**Ошибка типа (Type error)**

Такие ошибки могут возникать по нескольким причинам:

Согласно MDN, `TypeError` может быть выброшена:

- когда операнд или аргумент, переданный в функцию, несовместим с ожидаемым типом;
- при попытке изменить значение, которое нельзя изменять;
- при попытке использовать значение неподходящим способом.

Предположим, у нас есть две строки, которые мы хотим объединить для создания одного сообщения:

```javascript
const str1 = "Hello";
const str2 = "World!";
const message = str1.push(str2);
```

::: danger Ошибка

```
Uncaught TypeError: str1.push is not a function at script.js:3:22
```

:::

Здесь мы получаем `TypeError` с сообщением: `str1.push is not a function`. Это довольно распространённое сообщение, которое часто ставит новичков в тупик. Возможно, вы знаете, что метод `.push()` действительно существует, например, вы использовали его для добавления элементов в массивы.

Вот в этом и дело — `.push()` — это метод массива, а не строки. Поэтому он «не является функцией» для строк. Если заменить `.push()` на `.concat()` — правильный метод для работы со строками, — наш код будет работать как задумано!

Хороший совет при работе с TypeError: всегда проверяйте тип данных, с которым вы работаете. Скорее всего, либо тип не тот, что вы ожидали, либо используемый метод/операция не поддерживается этим типом.

## Советы по устранению ошибок

К этому моменту вы могли подумать: «Как же мне исправить эти ошибки?»

Вот несколько шагов:

1. **Ошибка — ваш друг, а не враг.** Сообщение об ошибке точно указывает, что не так с вашим кодом, и какие строки нужно проверить. Без таких сообщений отладка была бы кошмаром — ведь код всё равно не работал бы, но мы бы не знали почему!

2. **Ищите решение в Google.** Вероятнее всего, вы найдёте ответ или объяснение на StackOverflow или в официальной документации. Даже если решения нет, вы сможете лучше понять, почему эта ошибка возникла.

3. **Используйте отладчик (debugger).** Как уже говорилось ранее, отладчик отлично подходит для сложных случаев. Это важнейший инструмент разработчика. Вы можете устанавливать точки останова, просматривать значения переменных в любой момент выполнения программы, пошагово выполнять код и многое другое. Это очень полезный инструмент, и каждый программист должен знать, как им пользоваться.

4. **Используйте консоль.** `console.log()` — популярный выбор для быстрой отладки. Для более глубокого анализа лучше подойдёт отладчик, но `console.log()` позволяет быстро получить результат без необходимости проходить через весь код. Также существуют другие полезные методы, такие как `console.table()`, `console.trace()` и другие.

## Ошибки против предупреждений

Многие люди воспринимают предупреждения (warnings) как ошибки. Однако между ними есть важное различие:

- **Ошибки** останавливают выполнение программы или процесс, который вы пытаетесь запустить.
- **Предупреждения**, в свою очередь, информируют вас о потенциальных проблемах, которые могут не привести к аварийному завершению программы, но всё же требуют внимания.

Хотя предупреждения тоже стоит исправлять, они не настолько критичны, как ошибки. Обычно предупреждения отображаются жёлтым цветом, а ошибки — красным. Хотя точный цвет зависит от платформы, обычно между ними есть визуальное отличие.

## Задание

1. Теперь пришло время заглянуть в документацию! Изучите подробнее:

    - [ReferenceError](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/ReferenceError)
    - [SyntaxError](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/SyntaxError)
    - [TypeError](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/TypeError)

Не переживайте, если сейчас вы не поймёте всё полностью. Главная цель — познакомиться с этими понятиями.

В этих примерах используются конструкции `try...catch`. Они выполняют код внутри блока `try`. Если происходит ошибка, она автоматически перехватывается блоком `catch`. Это позволяет вам обрабатывать ошибки до того, как они остановят выполнение скрипта.

На данном этапе просто запомните, что такие конструкции существуют и будут полезны по мере вашего обучения.

2. Пройдите материал [«Что пошло не так? Устранение ошибок JavaScript»](https://developer.mozilla.org/ru/docs/Learn_web_development/Core/Scripting/What_went_wrong). Не забудьте скачать исходный код с намеренно допущенными ошибками.

## Проверьте себя

Ответьте на следующие вопросы, чтобы закрепить ключевые темы урока. Если вы не можете ответить на какой-либо вопрос, кликните по нему, чтобы вернуться к соответствующей части материала. Помните, что не требуется заучивать или идеально запоминать всё.

**По каким трём причинам может возникнуть TypeError?**  
<details>  
<summary>Ответ</summary>  

`TypeError` может возникнуть по следующим причинам:

1. Когда операнд или аргумент, переданный в функцию, несовместим с ожидаемым типом данных.
2. При попытке изменить значение, которое нельзя изменять (например, константу или неизменяемое свойство).
3. При попытке использовать значение неподходящим образом (например, вызвать метод, которого у этого типа данных нет).

</details>

**В чём основное различие между ошибкой и предупреждением?**  
<details>  
<summary>Ответ</summary>  

Ошибка (**error**) останавливает выполнение программы или текущего процесса.  
Предупреждение (**warning**) — это информационное сообщение, указывающее на потенциальную проблему, но **не останавливающее** выполнение программы.

</details>

**Какой один метод можно использовать для устранения ошибки?**  
<details>  
<summary>Ответ</summary>  

Один из методов устранения ошибок — использование отладчика (`debugger`), который позволяет ставить точки останова, пошагово выполнять код и проверять значения переменных в процессе выполнения программы.

</details>

## Дополнительные материалы

Этот раздел содержит полезные ссылки на дополнительные материалы. Их прохождение не обязательное, но рекомендованное.

- [Справочник по ошибкам JavaScript](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Errors) на MDN
- Статья W3Schools [о методах объекта window.console](https://www.schoolsw3.com/jsref/obj_console.php)
- Видео [«Chrome DevTools / Методы объекта console»](https://vkvideo.ru/video-226960422_456239045) от Игоря Антонова
