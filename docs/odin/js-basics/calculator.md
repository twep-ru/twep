---
title: Калькулятор
description: Скоро вы поймёте, насколько мощными являются объекты и массивы, и как они могут стать незаменимой частью вашего набора инструментов в JavaScript
---

# {{ $frontmatter.title}}

## Введение

Поздравляем! К этому моменту вы уже должны твёрдо усвоить основы JavaScript. Конечно, учиться ещё очень много, но уже сейчас вы способны создавать довольно сложные приложения. Наш финальный проект объединит всё, что вы узнали до сих пор: вы создадите калькулятор на экране, используя JavaScript, HTML и CSS.

Как обычно, в этом проекте будут моменты, которые окажутся непростыми для вас, но если вы внимательно прошли весь курс, у вас уже есть все необходимые знания, чтобы успешно завершить задание. Мы подробно опишем шаги, которые вам предстоит выполнить, однако как реализовывать их — решать вам!

## Предупреждение

Прежде чем начать работу над проектом, важно сделать одно предупреждение. Когда вы будете изучать, как вычислять сложные математические выражения в JavaScript, вы, скорее всего, наткнётесь на заманчивую функцию [`eval()`](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/eval). Однако эта функция может быть очень опасной, и MDN отлично объясняет, почему ей никогда не следует пользоваться! В рамках этого проекта вам нужно будет создать собственные функции для вычисления выражений. Также, при поиске способов вычисления выражений, вы можете натолкнуться на решения, предлагающие создавать новый объект `Function()`, который выполняет строку кода. Как и в случае с `eval()`, этого следует [избегать из-за рисков](https://ru.stackoverflow.com/questions/450562/%D0%9F%D0%BE%D1%87%D0%B5%D0%BC%D1%83-%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-eval-%D0%B2-%D1%8F%D0%B7%D1%8B%D0%BA%D0%B5-javascript-%D1%81%D1%87%D0%B8%D1%82%D0%B0%D0%B5%D1%82%D1%81%D1%8F-%D0%BD%D0%B5%D0%B1%D0%B5%D0%B7%D0%BE%D0%BF%D0%B0%D1%81%D0%BD%D1%8B%D0%BC), связанных с выполнением ненадёжных данных. Да и где же тогда удовольствие от решения, которое делает всю работу за вас? Приступим!

## Задание

Не забывайте делать коммиты как можно чаще!

Вот список требований к вашему проекту (что от него ожидается):

1. Ваш калькулятор должен содержать функции для всех основных математических операций, которые обычно есть на калькуляторах. Начните с создания функций для следующих операций и протестируйте их в консоли браузера:

   - `add` (сложение)
   - `subtract` (вычитание)
   - `multiply` (умножение)
   - `divide` (деление)

2. Математическая операция в калькуляторе состоит из числа, оператора и ещё одного числа. Например, 3 + 5. Создайте три переменные — по одной для каждой части операции. Позже вы будете использовать эти переменные для обновления отображения.

3. Создайте новую функцию `operate`, которая принимает оператор и два числа, а затем вызывает соответствующую функцию (из тех, что вы создали выше) с этими числами.

4. Создайте базовую HTML-страницу калькулятора с кнопками для каждой цифры и оператора (включая кнопку `=`).

   - Пока не нужно делать их функциональными.
   - На странице также должен быть экран (дисплей) калькулятора. Заполните его любыми примерными числами, чтобы визуально всё выглядело правильно.
   - Добавьте кнопку «Очистить» (clear).

5. Создайте функции, которые обновляют отображение при нажатии на кнопки цифр. Содержимое экрана (число) нужно сохранять в переменной — это понадобится на следующем шаге.

6. Сделайте калькулятор рабочим! Вам нужно сохранять первое и второе числа, введённые пользователем, и при нажатии кнопки `=` выполнять операцию `operate()` с этими числами, используя выбранный между ними оператор.

   - У вас уже должен быть код, обновляющий дисплей, так что после вызова `operate()` отобразите результат операции.
   - Это самая сложная часть проекта: вам нужно продумать, как хранить все значения и как правильно вызывать функцию `operate()` с этими значениями. Не расстраивайтесь, если логика будет даваться с трудом — это нормально.

7. Важные моменты: обратите внимание и исправьте следующие возможные ошибки:

   - **Ваш калькулятор не должен вычислять более одной пары чисел за раз.** Например, вот как он должен работать:

     1. Пользователь вводит число (12).
     2. Нажимает оператор (+).
     3. Вводит второе число (7).
     4. Нажимает ещё один оператор (-). В этот момент калькулятор должен вычислить первую пару (12 + 7) и показать результат (19).
     5. Вводит новое число (1).
     7. Нажимает другой оператор или знак `=`. Теперь калькулятор должен использовать предыдущий результат (19) как первое число, оператор (-) и новое число (1), чтобы вычислить 19 - 1. На экране должно отобразиться 18.
     - Чтобы увидеть, как это работает, попробуйте ввести выражение `12 + 7 - 1 =` в [этот онлайн-калькулятор](https://web-calculator.ru/).

   - Округляйте результаты с длинными десятичными дробями, чтобы они не выходили за пределы экрана.

   - Будьте осторожны: нажатие `=` до ввода обоих чисел или оператора может вызвать ошибку!

   - Нажатие кнопки «Очистить» должно полностью сбрасывать все данные. Убедитесь, что после её нажатия пользователь начинает с чистого листа.

   - Если пользователь пытается делить на ноль, отображайте насмешливое (или предупреждающее) сообщение об ошибке — но не допускайте, чтобы калькулятор «падал».

   - Убедитесь, что калькулятор выполняет операцию только тогда, когда пользователь ввёл два числа и оператор. Пример: пользователь вводит число (2), нажимает оператор (+), а затем снова нажимает оператор (+). Калькулятор **не должен** интерпретировать это как 2 + 2 и не должен показывать 4. Если подряд нажимаются операторы, калькулятор не должен выполнять вычисления — он должен просто запомнить последний введённый оператор для следующей операции.

   - Когда результат уже отображается на экране, нажатие новой цифры должно очищать результат и начинать новое вычисление, а не добавлять цифру к уже отображаемому числу. Проверьте, так ли работает ваш калькулятор!

**Дополнительные задания (для желающих):**

- Пользователи могут получить числа с плавающей точкой в результате вычислений, но пока не могут вводить их вручную. Добавьте кнопку `.` и разрешите ввод десятичных дробей! При этом убедитесь, что нельзя ввести более одной точки, например: 12.3.56.5. Отключайте кнопку `.`, если в отображаемом числе уже есть десятичная точка.

- Добавьте кнопку «Удалить последний символ» (backspace), чтобы пользователь мог отменить последнюю введённую цифру, если случайно нажал не ту кнопку.

- Добавьте поддержку клавиатуры: пусть калькулятор реагирует на нажатия клавиш с цифрами, операторами и Enter.

## Проекты пользователей  

Посмотреть исходный код калькуляторов других учеников The Odin Project, а также отправить свой вариант, [можно у них на сайте](https://www.theodinproject.com/lessons/foundations-calculator/project_submissions).