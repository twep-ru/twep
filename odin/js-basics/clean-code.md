---
title: Чистый код
description: Вы можете подумать, что большую часть времени разработчики тратят на написание кода. Однако на самом деле значительную часть времени они читают код. Речь идет о коде, написанном другими членами команды, людьми, которые больше не работают в вашей команде, а также собственном коде, написанном пару недель назад, который вы уже могли забыть.
---

# {{ $frontmatter.title}}

## Введение

Вы можете подумать, что большую часть времени разработчики тратят на написание кода. Однако на самом деле значительную часть времени они читают код. Речь идет о коде, написанном другими членами команды, людьми, которые больше не работают в вашей команде, а также собственном коде, написанном пару недель назад, который вы уже могли забыть.

Не думайте, что вам нужно сразу же овладеть всеми этими принципами. Иногда даже профессионалы пишут запутанный код. Наша цель — дать вам некоторые рекомендации, которые помогут улучшить читаемость вашего кода по мере его написания. Чем больше вы будете писать код, тем он станет лучше как с точки зрения читаемости, так и по другим параметрам.

Испытывайте эти идеи на практике, старайтесь применять их при написании кода, но не ругайте себя за то, что код получился неаккуратным или непонятным. Сосредоточьтесь на постепенном улучшении, а не на достижении совершенства.

Теперь, когда это позади, давайте начнем!

## Обзор урока

Темы, которые вы изучите в данном уроке:

- Умение отличать сложный для восприятия код от простого.
- Использование основных принципов программирования для улучшения кода.
- Полезные комментарии.

## Что такое чистый код?

Рассмотрите следующие примеры:

**Пример A:**

```javascript
const x = function (z) {
  const w = "Hello ";
  return w + z;
};
x("John");
```

**Пример B:**

```javascript
const generateUserGreeting = function (name) {
  const greeting = "Hello ";
  return greeting + name;
};

generateUserGreeting("John");
```

Какой из этих примеров вам легче читать? Сразу видно, что второй вариант более понятен. Удивительно, но обе эти функции выполняют одну и ту же задачу (даже с одинаковой логикой!), и оба варианта являются корректным кодом. Однако второй намного лучше читается. Почему?

**В первом примере** используются переменные из одной буквы, а также нарушены правила отступов и пробелов. Результат — запутанный и неопрятный код.

Представьте, что вы работаете над проектом вместе с человеком, написавшим первую функцию. Сколько времени у вас уйдет на то, чтобы разобраться, что она делает, прежде чем вы сможете продолжить работу? Или, возможно, вы сами когда-то давно написали такой код и полностью забыли о его существовании. В любом случае вы в конечном итоге поймете, что происходит, но это будет непросто и неприятно.

**Пример B** демонстрирует чистый код. Даже если вы не знаете сразу, что делает каждая часть, гораздо легче догадаться благодаря понятным названиям функций и переменных. Также соблюдены правила отступов и форматирования, что делает код логичным и структурированным.

Однобуквенные переменные допустимо использовать только в контексте циклов или callback-функций. В других случаях их лучше избегать.

**Про camelCase**

camelCase — это соглашение об именовании, при котором несколько слов записываются слитно без пробелов и знаков препинания. При этом первое слово пишется строчными буквами, а каждое последующее начинается с заглавной буквы. Например, в переменной `setTimeout` слово `Timeout` начинается с заглавной буквы.

В рамках этого курса большинство наших переменных и функций будет называться именно в стиле camelCase. Хотя не все языки программирования используют это соглашение, в JavaScript оно очень распространено, поэтому мы будем ему следовать.

> **Соглашения — это всего лишь соглашения**  
> Хотя этот урок предоставляет некоторые примеры того, как можно сделать код чище, на практике каждая организация может иметь свои собственные подходы, которые немного отличаются от приведенных здесь примеров. Ничего абсолютного в этом нет.
> Главное — чтобы все эти подходы служили общей цели: улучшению читаемости и поддерживаемости кода. До тех пор, пока вы не столкнетесь с необходимостью соблюдать конкретный набор правил, разумно выбрать какое-либо соглашение и придерживаться его последовательно.

## Именование функций и переменных

В предыдущем примере мы уже касались важности осмысленного именования. Теперь давайте подробнее разберём, что делает имя переменной или функции хорошим.

**Хорошее имя — это описательное имя**

В нашем хорошем примере есть переменная `greeting`, к которой прибавляется параметр `name`. Функция называется `generateUserGreeting`, и именно это она и делает. Чисто, понятно и логично.

Теперь представьте, как вы обсуждаете плохой пример с коллегой. Функция названа `x`, а переменные — `z` и `w`. Не очень приятно, правда?

**Используйте единый словарь**

Переменные одного типа должны следовать единой системе именования. Рассмотрим пример из игры:

```javascript
// Единственная система именования
function getPlayerScore();
function getPlayerName();
function getPlayerTag();
```

Все эти функции используют один и тот же глагол — `get`, то есть «получить». Теперь посмотрите на другой пример:

```javascript
// Разные названия
function getUserScore();
function fetchPlayerName();
function retrievePlayer1Tag();
```

В этом случае для обозначения одного действия используются разные глаголы: `get`, `fetch`, `retrieve`. Хотя они похожи по смыслу, на первый взгляд может показаться, что различия в словах подразумевают различие в функциональности (например, «получение» может отличаться от «загрузки» в определённом контексте).  
Кроме того, в чём разница между `User`, `Player` и `Player1`? Если никакой, то лучше использовать одно и то же имя, например `Player`.

Единство в именовании помогает делать код предсказуемым.

**Как правильно начинать имена**

- **Переменные** обычно представляют собой "вещи", поэтому их имена лучше начинать с существительного или прилагательного (фразы из существительных).
- **Функции** представляют действия, поэтому их имена должны начинаться с глаголов.

**Примеры хороших имён:**

```javascript
const numberOfThings = 10;
const myName = "Thor";
const selected = true;
```

**Менее удачные примеры (начинаются с глаголов, могут быть спутаны с функциями):**

```javascript
const getCount = 10;
const showNorseGods = ["Odin", "Thor", "Loki"];
```

**Хорошие примеры для функций:**

```javascript
function getCount() {
  return numberOfThings;
}
```

**Плохой пример (имя функции не обозначает действие):**

```javascript
function myName() {
  return "Thor";
}
```

## Используйте имена, которые легко искать и сразу понимать

Иногда возникает соблазн использовать так называемые _магические значения_ — конкретные числа или строки без пояснений. Например:

```javascript
setTimeout(stopTimer, 3600000);
```

Проблема очевидна: что означает число `3600000`? И сколько времени пройдёт до вызова `stopTimer`? Даже если вы знаете, что в JavaScript время указывается в миллисекундах, вам всё равно потребуется калькулятор или Google, чтобы понять, сколько это секунд или минут.

Сделаем этот код более понятным, введя описательную переменную:

```javascript
const ONE_HOUR = 3600000; // Можно также записать как 60 * 60 * 1000;

setTimeout(stopTimer, ONE_HOUR);
```

Гораздо лучше! Теперь переменная имеет понятное имя, и нет необходимости выполнять вычисления при чтении кода.

**Почему переменная написана ЗАГЛАВНЫМИ БУКВАМИ?**

Вы могли заметить, что мы использовали верхний регистр (`ONE_HOUR`), хотя ранее рекомендовали использовать стиль `camelCase`. Это общепринятая практика — писать имена констант заглавными буквами, особенно если они представляют собой неизменные значения, такие как длительность времени.

Мы точно знаем, что количество миллисекунд в часе никогда не изменится, значит, такое использование уместно.  
Помните: это всего лишь соглашение. Не все программисты придерживаются его, и это нормально. Главное — быть последовательным внутри проекта.

## Отступы и длина строк

Теперь настало время обсудить более «спорные» темы (есть шутка про [войну между программистами](https://thecode.media/tabs-vs-spaces/), которые используют для отступов пробелы, а кто — табуляцию).

**Главное — это последовательность.** Выберите один способ делать отступы и придерживайтесь его. Разные руководства по стилю JavaScript предлагают разные варианты, и ни один из них не является явно лучшим. Мы подробнее рассмотрим руководства по стилю и связанные с ними инструменты позже в рамках курса.

**Длина строки**

Опять же, разные руководства могут рекомендовать разные подходы, но почти все они советуют ограничивать длину каждой строки кода.

Как правило, ваш код будет легче читать, если вы вручную разбивать строки, которые длиннее примерно **80 символов**. Во многих редакторах кода есть специальная линия, которая показывает, когда вы переходите этот порог. При ручном разрыве строки лучше всего делать перенос сразу **после оператора или запятой**.

Существует несколько способов оформить такие переносы. Например:

```javascript
// Эта строка слишком длинная
let reallyReallyLongLine =
  something +
  somethingElse +
  anotherThing +
  howManyTacos +
  oneMoreReallyLongThing;
```

**Вариант 1: каждый элемент на новой строке**

```javascript
let reallyReallyLongLine =
  something +
  somethingElse +
  anotherThing +
  howManyTacos +
  oneMoreReallyLongThing;
```

**Вариант 2: продолжение строки после оператора**

```javascript
let anotherReallyReallyLongLine =
  something +
  somethingElse +
  anotherThing +
  howManyTacos +
  oneMoreReallyLongThing;
```

Разные способы форматирования не являются правильными или неправильными — у каждого могут быть свои предпочтения. Делайте так, как вам кажется логичным, главное — соблюдайте **единый стиль** во всём коде.

## Точка с запятой

В JavaScript точки с запятой **в большинстве случаев не обязательны**, потому что интерпретатор автоматически добавляет их при необходимости. Однако эта функция может работать некорректно в некоторых ситуациях, что приведёт к ошибкам в коде. Поэтому мы рекомендуем привыкнуть использовать точки с запятой.

Независимо от того, решите ли вы их использовать или нет, важно одно — **соблюдение последовательности**.

## О комментариях

Комментарии — это отличный инструмент, но, как и любой хороший инструмент, их можно использовать неправильно. Особенно на начальном этапе обучения программированию может возникнуть соблазн добавлять комментарии, которые объясняют всё, что делает код. Однако так делать не рекомендуется. Давайте рассмотрим распространённые ошибки при использовании комментариев и разберёмся, почему они вредны.

**Не используйте комментарии вместо Git**

Иногда хочется оставлять в коде комментарии, в которых перечислены изменения:

```
/**
 * 2023-01-10: Удалён ненужный код, вызывавший путаницу (RM)
 * 2023-03-05: Упрощён код (JP)
 * 2023-05-15: Удалены функции, вызывавшие ошибки в продакшене (LI)
 * 2023-06-22: Добавлена новая функция для объединения значений (JR)
 */
```

Проблема в том, что у вас уже есть отличный инструмент для отслеживания изменений — **Git**! Хранить такие комментарии в коде неудобно, со временем они становятся бесполезным мусором, а вся история изменений будет всё равно неполной.

С помощью `git log` вы сможете легко посмотреть всю историю изменений, и она будет аккуратно организована в репозитории.

То же самое касается старого кода, который больше не используется. Если он понадобится снова — всегда можно вернуться к нужному коммиту. Конечно, временно закомментировать часть кода во время тестирования — нормально. Но если код стал ненужным — удалите его, а не оставляйте закомментированным:

```javascript
theFunctionInUse();
// oldFunction();
// evenOlderUselessFunction();
// whyAmIEvenHereImAncient();
```

**Пишите «почему», а не «как»**

Хорошие комментарии не дублируют код или логику, они объясняют **причину**, почему что-то сделано именно так. Иногда даже **не нужно писать комментарии вообще**, если код самодостаточен.

Представьте, что у нас есть строка с текстом внутри квадратных скобок, и мы хотим извлечь этот текст:

**Пример с плохими комментариями:**

```javascript
// Функция для извлечения текста
function extractText(s) {
  // Возвращаем строку, начиная после "[" и до "]"
  return s.substring(s.indexOf("[") + 1, s.indexOf("]"));
}
```

Эти комментарии просто повторяют то, что и так видно из кода. Они не добавляют ценности.

**Лучше:**

```javascript
// Извлекает текст внутри квадратных скобок (без самих скобок)
function extractText(s) {
  return s.substring(s.indexOf("[") + 1, s.indexOf("]"));
}
```

Здесь комментарий уже объясняет **цель** функции, а не то, как она работает.

**Ещё лучше — обойтись без комментариев:**

```javascript
function extractTextWithinBrackets(text) {
  const bracketTextStart = text.indexOf("[") + 1;
  const bracketTextEnd = text.indexOf("]");
  return text.substring(bracketTextStart, bracketTextEnd);
}
```

В этом случае хорошо подобранные имена функции и переменных говорят сами за себя. Никаких дополнительных объяснений не нужно. Красиво, правда?

**Когда комментарии действительно нужны?**

Это не значит, что хороший код не должен содержать комментариев. Вот пример полезного комментария:

```javascript
function calculateBMI(height, weight) {
  // Формула расчёта ИМТ: масса тела в килограммах делённая на рост в метрах в квадрате
  const heightInMeters = height / 100;
  const bmi = weight / (heightInMeters * heightInMeters);
  return bmi;
}
```

Такой комментарий помогает читателю вспомнить формулу расчёта ИМТ и понять, почему рост переводится в метры. Он объясняет **логику**, а не просто дублирует код.

**Зачем тогда вообще нужны комментарии?**

Правильно расставленные комментарии бесценны. Они могут:

- Объяснять, почему в коде используется неочевидное решение.
- Раскрывать общую картину: почему эта функция важна здесь, а не где-то ещё.
- Предупреждать о сложных участках кода или специфических случаях.

Более подробно об этом вы можете прочитать в статье, ссылка на которую приведена в задании.

## Заключение

Теперь, когда мы рассмотрели основные идеи, стоит вспомнить напоминание из начала урока. **Не пытайтесь писать идеально чистый код с самого начала** — это лишь приведёт к разочарованию. Писать «спагетти-код» неизбежно; так делают все, время от времени. Просто держите эти принципы в голове и со временем, набравшись терпения, вы начнёте писать всё чище и лучше.

Научиться писать чистый код — это процесс постоянного совершенствования. Он продолжится за рамками вашего обучения на **The Odin Project**. Этот урок призван стать вашей отправной точкой на пути к этому навыку.

> Отличный код рождается из опыта. А опыт приходит… из не самого лучшего кода.

## Задание

1. Прочитайте статью [**«10 принципов хорошего кода и хорошего программиста»**](#), чтобы получить полезные советы по написанию чистого кода.
2. Чтобы лучше понять, как правильно использовать комментарии, ознакомьтесь с материалами о том:
   - Как писать **комментарии, объясняющие причину**, а не только то, что происходит.
   - Как обойтись **без комментариев вообще**, если код сам себя объясняет.

### Проверьте себя

Ниже приведены вопросы, которые помогут вам пересмотреть ключевые темы этого урока. Если вы не можете ответить на какой-то вопрос, кликните по нему, чтобы вернуться к соответствующему разделу. Не волнуйтесь — запоминать всё наизусть не требуется.

**Почему важно писать чистый код?**  
<details>  
<summary>Ответ</summary>  

Чистый код важен, потому что его легче читать, понимать и поддерживать. Большая часть времени разработчики проводят не за написанием нового кода, а за чтением и модификацией существующего. Чистый код упрощает совместную работу, снижает количество ошибок и делает проект более устойчивым в долгосрочной перспективе.

</details>  

**Какие есть хорошие принципы для поддержания чистоты кода?**  
<details>  
<summary>Ответ</summary>  

Вот некоторые ключевые принципы:

- Использовать осмысленные имена переменных и функций.
- Следить за единообразием в наименовании (например, использовать один глагол для похожих функций).
- Разбивать длинные строки на несколько строк для лучшей читаемости.
- Избегать "магических чисел" — использовать константы с описательными именами.
- Писать функции, выполняющие одну задачу.
- Использовать комментарии только тогда, когда они действительно нужны — чтобы объяснить **почему**, а не **что** происходит.
- Соблюдать единый стиль отступов и форматирования.

</details>  

**В чём разница между хорошими и плохими комментариями?**  
<details>  
<summary>Ответ</summary>  

**Хорошие комментарии** объясняют **причину**, почему что-то реализовано именно так, особенно если это неочевидно из кода. Они помогают понять контекст или сложные решения.

**Плохие комментарии** просто дублируют то, что уже видно из кода (например, «возвращаем результат»), либо описывают **что** происходит, вместо того чтобы объяснять **почему**. Такие комментарии бесполезны и могут даже мешать чтению кода.

</details>

### Дополнительные материалы

Этот раздел содержит полезные ссылки на дополнительный контент. Он не является обязательным, но может быть вам интересен:

- [**Мнение: код должен быть документацией**](#) (статья)
- [Руководство по стилю кода Airbnb](https://leonidlebedev.github.io/javascript-airbnb/) `Github`
- [**Использование цепочек методов для создания "предложений" в коде**](#)
- [Чистый код в JavaScript](https://github.com/devSchacht/clean-code-javascript) `Github`